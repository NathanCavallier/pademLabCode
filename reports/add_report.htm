<div class="container">
    <form id="reportForm">
        <div class="form-group">
            <label for="reportName">Nom du projet</label>
            <input type="text" class="form-control" id="reportName" required>
        </div>
        <div class="form-group">
            <label>Destinataires du rapport: </label>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="reportReceiversAll_ed8c6549bwf9"
                    placeholder="-">
                <label class="form-check-label" for="reportReceiversAll">
                    Tous les membres du projet
                </label>
                <label class="form-check-label" for="reportReceiversAll">
                    Le Référent du projet
                </label>
                <label class="form-check-label" for="reportReceiversAll">
                    <select class="form-control" id="reportReceiversAll" required>
                        <option value="">Sélectionnez des membres du projet</option>
                    </select>
                </label>
            </div>
            <label for="reportReceivers">Destinataires du rapport:</label>
            <input type="text" class="form-control" id="reportReceivers" required>
        </div>
        <div class="form-group">
            <label for="reportType">Type de rapport: </label>
            <select class="form-control" id="reportType" required>
                <option value="">Sélectionnez le type de rapport</option>
                <option value="progress">Rapport d'avancement</option>
                <option value="final">Rapport final</option>
            </select>
        </div>
        <div class="form-group">
            <label for="reportContent">Ajouter des commentaires:</label>
            <textarea class="form-control" id="reportContent" rows="8" required></textarea>
        </div>
        <div class="form-group">
            <label for="reportFiles">Sélectionnez des fichiers à joindre au rapport: </label>
            <input type="file" class="form-control-file" id="reportFiles" multiple>
        </div>
        <button type="submit" class="btn btn-primary">Soumettre le rapport</button>
    </form>
</div>

<script>
    document.getElementById('reportForm').addEventListener('submit', function (event) {
        event.preventDefault();
        submitReport();
    });

    //#region Fonction pour annuler le projet
    function cancelProject() {
        var projectForm = document.getElementById("projectForm");

        // Réinitialiser les champs du formulaire
        if (projectForm.body != null) {
            Swal.fire({
                title: 'Êtes-vous sûr de vouloir annuler?',
                text: "Vous ne pourrez pas revenir en arrière!",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#d33',
                cancelButtonColor: '#29A6A7',
                confirmButtonText: 'Oui',
                cancelButtonText: 'Non'
            })
                .then((result) => {
                    if (result.isConfirmed) {
                        Swal.fire(
                            'Annulé!',
                            'Votre projet a été annulé.',
                            'success'
                        )
                        projectForm.reset();
                        document.getElementById("projectForm").style.display = "none";
                        document.getElementById("add-file").style.title = "Ajouter un projet";

                        document.getElementById("cancelProjectButton").style.display = "none";
                        document.getElementById("saveProjectButton").style.display = "none";
                        document.getElementById("step1").style.display = "none";
                        document.getElementById("step2").style.display = "none";
                        document.getElementById("step3").style.display = "none";
                        document.getElementById("step4").style.display = "none";
                        document.getElementById("step5").style.display = "none";
                        document.getElementById("step6").style.display = "none";
                        document.getElementById("step7").style.display = "none";
                        document.getElementById("step8").style.display = "none";
                        document.getElementById("step9").style.display = "none";
                        document.getElementById("step10").style.display = "none";
                        document.getElementById("liens").style.display = "none";
                        document.getElementById("referants").style.display = "none";

                        document.getElementById("add-file").src = "https://lab.padem.org/wp-content/uploads/plus.png";
                        document.getElementById("preliminaires").src = "https://lab.padem.org/wp-content/uploads/plus.png";
                        document.getElementById("projet").src = "https://lab.padem.org/wp-content/uploads/plus.png";
                        document.getElementById("consultants-1").src = "https://lab.padem.org/wp-content/uploads/plus.png";
                        document.getElementById("comptables").src = "https://lab.padem.org/wp-content/uploads/plus.png";
                        document.getElementById("partners").src = "https://lab.padem.org/wp-content/uploads/plus.png";
                        document.getElementById("bailleurs-1").src = "https://lab.padem.org/wp-content/uploads/plus.png";
                        document.getElementById("objectifs").src = "https://lab.padem.org/wp-content/uploads/plus.png";
                        document.getElementById("financement").src = "https://lab.padem.org/wp-content/uploads/plus.png";
                        document.getElementById("rapports-attendus").src = "https://lab.padem.org/wp-content/uploads/plus.png";
                        document.getElementById("fichiers").src = "https://lab.padem.org/wp-content/uploads/plus.png";
                        document.getElementById("liens").src = "https://lab.padem.org/wp-content/uploads/plus.png";
                        document.getElementById("referants").src = "https://lab.padem.org/wp-content/uploads/plus.png";
                    }
                });
        }
        else {
            // Masquer le formulaire
            projectForm.style.display = "none";

            // Masquer les boutons Annuler et Sauvegarder
            showAndHideCancelButton();
            showAndHideSaveButton();

            document.getElementById("add-file").src = "https://lab.padem.org/wp-content/uploads/plus.png";
            document.getElementById("preliminaires").src = "https://lab.padem.org/wp-content/uploads/plus.png";
            document.getElementById("projet").src = "https://lab.padem.org/wp-content/uploads/plus.png";
            document.getElementById("consultants-1").src = "https://lab.padem.org/wp-content/uploads/plus.png";
            document.getElementById("comptables-1").src = "https://lab.padem.org/wp-content/uploads/plus.png";
            document.getElementById("partners").src = "https://lab.padem.org/wp-content/uploads/plus.png";
            document.getElementById("bailleurs-1").src = "https://lab.padem.org/wp-content/uploads/plus.png";
            document.getElementById("objectifs").src = "https://lab.padem.org/wp-content/uploads/plus.png";
            document.getElementById("financement").src = "https://lab.padem.org/wp-content/uploads/plus.png";
            document.getElementById("rapports-attendus").src = "https://lab.padem.org/wp-content/uploads/plus.png";
            document.getElementById("fichiers").src = "https://lab.padem.org/wp-content/uploads/plus.png";
            document.getElementById("liens-1").src = "https://lab.padem.org/wp-content/uploads/plus.png";
            document.getElementById("referants-1").src = "https://lab.padem.org/wp-content/uploads/plus.png";
        }
    }
    //#endregion

    // Fonction pour switcher les images des boutons
    function switchFormsIcons(id) {
        var element = document.getElementById(id);
        if (element.src.match("https://lab.padem.org/wp-content/uploads/plus.png")) {
            element.src = "https://lab.padem.org/wp-content/uploads/voire.png";
        } else if (element.src.match("https://lab.padem.org/wp-content/uploads/voire.png")) {
            element.src = "https://lab.padem.org/wp-content/uploads/masquer.png";
        } else {
            element.src = "https://lab.padem.org/wp-content/uploads/voire.png";
        }
    }

    // Fonction pour switcher les images du bouton Ajouter un projet
    function switchAddProjectButtonIcon() {
        var element = document.getElementById("add-file");
        if (element.src.match("https://lab.padem.org/wp-content/uploads/plus.png") && document.getElementById('projectForm').style.display === 'none') {
            element.src = "https://lab.padem.org/wp-content/uploads/voire.png";
            element.title = "Afficher le formulaire";
        } else if ((document.getElementById("cancelProjectButton").style.display === "block") && (element.src.match("https://lab.padem.org/wp-content/uploads/masquer.png"))) {
            element.src = "https://lab.padem.org/wp-content/uploads/voire.png";
            element.title = "Masquer le formulaire";
        } else {
            element.src = "https://lab.padem.org/wp-content/uploads/masquer.png";
            element.title = "Afficher le formulaire";
        }
    }
</script>
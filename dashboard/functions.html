<!-- Formulaire de recherche -->
<form id="searchForm"
    style="margin: 2px; padding: 2px; border-radius: 25px; background-color: transparent; color: gray;">
    <input type="text" id="searchInput" placeholder="Rechercher...">
    <button type="submit" style="background-color: transparent; color: gray;" title="Rechercher">
        <img src="https://lab.padem.org/wp-content/uploads/search.png" alt="Icone utilisateurs"
            >
    </button>
</form>

<!-- Afficher le nombre d'utilisateurs connectés -->
<div>
    <div style=" margin: 5px; padding: 5px;"></div>
    <div style="display: flex;">
        <p style="font-size: 12px; color: #00BF63; font-weight: lighter;" id="numberOfMembersOnline"></p>
        <!-- Afficher une petite icone à côté du nombre d'utilisateur -->
        <div style="margin-top: 5px; padding: 5px;"></div>
        <img src="https://lab.padem.org/wp-content/uploads/online.png" alt="Icone utilisateurs"
            style="width: 20px; height: 20px;" id="iconOnlineUsers">
    </div>
</div>

<!-- Afficher le nom et le rôle de l'utilisateur connecté -->
<div style="display: flex;">
    <p style="font-size: 12px; color: gray; font-weight: bold;" id="userFirstName"></p>
    <p style="font-size: 12px; color: gray; font-weight: bold;" id="userLastName"></p>
    -
    <p style="font-size: 12px; color: gray; font-weight: lighter;" id="userRole"></p>
</div>
<script>
    document.getElementById('searchForm').addEventListener('submit', function (e) {
        e.preventDefault();
        // Récupérer les informations de l'utilisateur connecté
        var userId;
        var userEmail = '';
        var userFirstName = '';
        var userLastName = '';
        var userRole = [];
        var buttonText = '';

        // Récupérer les informations de l'utilisateur connecté
        fetch('https://lab.padem.org/wp-json/mo/v1/getUserInfo', {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json',
            },
        })
            .then(response => response.json())
            .then(data => {
                console.log(data);
                userId = data.user_infos._id;
                userEmail = data.user_infos.email;
                userFirstName = data.user_infos.first_name;
                userLastName = data.user_infos.last_name;
                if (data.role.administrator) {
                    userRole.push('Administrateur');
                } else if (data.role['chef-de-projet']) {
                    userRole.push('Chef de projet');
                } else if (data.role.comptable) {
                    userRole.push('Comptable');
                } else if (data.role.consultant) {
                    userRole.push('Consultant');
                } else if (data.role.partenaire) {
                    userRole.push('Partenaire');
                } else if (data.role.subscriber) {
                    userRole.push('Abonné');
                } else {
                    userRole.push('Utilisateur');
                }
            })
        document.getElementById('userFirstName').innerHTML = userFirstName;
        document.getElementById('userLastName').innerHTML = userLastName;
        userRole.forEach(role => {
            var p = document.createElement('p');
            p.innerHTML = role;
            document.getElementById('userRole').appendChild(p);
            p.style.fontSize = '10px';
            p.style.color = 'gray';
            p.style.fontWeight = 'lighter';
            p = document.createElement('p');
        });
    });
</script>
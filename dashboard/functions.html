<!-- Formulaire de recherche -->
<form id="searchForm"
    style="margin: 2px; padding: 2px; background-color: transparent; color: gray;">
    <input type="text" id="searchInput" style="border-radius: 25px; height: 25px;" placeholder="......">
    <button type="submit" style="background-color: transparent; color: gray; font-size: 12px;">
        Rechercher
    </button>
</form>

<!-- Afficher le nombre d'utilisateurs connectés -->
<div>
    <div style=" margin: 5px; padding: 5px;"></div>
    <div style="display: flex;">
        <p style="font-size: 12px; color: #00BF63; font-weight: lighter;" id="numberOfMembersOnline"></p>
        <!-- Afficher une petite icone à côté du nombre d'utilisateur -->
        <div style="margin-top: 5px; padding: 5px;"></div>
        <img src="https://lab.padem.org/wp-content/uploads/online.png" alt="Icone utilisateurs"
            style="width: 20px; height: 20px;" id="iconOnlineUsers" />
    </div>
</div>

<!-- Afficher le nom de l'utilisateur connecté -->
<div>
    <div style=" margin: 5px; padding: 5px;"></div>
    <div style="display: flex;">
        <div style=" margin-right: 2px; padding-right: 2px;"></div>
        <p style="font-size: 12px; color: gray; font-weight: bold;" id="userFirstName"></p>
        <div style=" margin-right: 2px; padding-right: 2px;"></div>
        <p style="font-size: 12px; color: gray; font-weight: bold;" id="userLastName"></p>
        <div style=" margin-right: 3px; padding-right: 3px;"></div>
    </div>
</div>

<!-- Afficher le rôle de l'utilisateur connecté -->
<div style=" display: flex; width: fit-content;">
    <p style="width: fit-content; font-size: 12px; color: lightgray; font-weight: lighter; margin: 5px; padding: 5px; border-radius: 20px;">Rôle:</p>
    <p style="width: fit-content;; font-size: 12px; color: white; font-weight: lighter; background-color: #29A6A7; margin: 5px; padding: 5px; border-radius: 20px;" id="userRole"></p>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Récupérer les informations de l'utilisateur connecté
        var userId;
        var userEmail = '';
        var userFirstName = '';
        var userLastName = '';
        var userRole = [];
        var buttonText = '';

        // Récupérer les informations de l'utilisateur connecté
        fetch('https://lab.padem.org/unserialize_usermeta.php', {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json',
            },
        })
            .then(response => response.json())
            .then(data => {
                console.log(data);
                userId = data.user_infos._id;
                userEmail = data.user_infos.email;
                userFirstName = data.user_infos.first_name;
                userLastName = data.user_infos.last_name;
                if (data.role.administrator) {
                    userRole.push('Administrateur');
                } else if (data.role['chef-de-projet']) {
                    userRole.push('Chef de projet');
                } else if (data.role.comptable) {
                    userRole.push('Comptable');
                } else if (data.role.consultant) {
                    userRole.push('Consultant');
                } else if (data.role.partenaire) {
                    userRole.push('Partenaire');
                } else if (data.role.subscriber) {
                    userRole.push('Abonné');
                } else {
                    userRole.push('Utilisateur');
                }
                document.getElementById('userFirstName').textContent = userFirstName;
                document.getElementById('userLastName').textContent = userLastName;
                document.getElementById('userRole').textContent = userRole.join(', ');
            })
            .catch(error => {
                console.error('Error:', error);
            });
    });
</script>
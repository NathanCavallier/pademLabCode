<script src="https://kit.fontawesome.com/a076d05399.js"></script> <!-- Ajoutez ceci pour utiliser Font Awesome -->
<!-- Afficher la liste de tout les membres du site -->
<ul id="all_members" style="list-style: none; display: none;"></ul>

<script src="https://kit.fontawesome.com/a076d05399.js"></script> <!-- Ajoutez ceci pour utiliser Font Awesome -->
<!-- Afficher la liste de tout les coordinateurs du site -->
<ul id="coordinateur" style="display: none; list-style: none;"></ul>

<script src="https://kit.fontawesome.com/a076d05399.js"></script> <!-- Ajoutez ceci pour utiliser Font Awesome -->
<!-- Afficher la liste de tout les chefs de projet du site -->
<ul id="chef_de_projet" style="list-style: none; display: none;"></ul>

<script src="https://kit.fontawesome.com/a076d05399.js"></script> <!-- Ajoutez ceci pour utiliser Font Awesome -->
<!-- Afficher la liste de tout les comptables du site -->
<ul id="accountant" style="list-style: none; display: none;"></ul>

<script src="https://kit.fontawesome.com/a076d05399.js"></script> <!-- Ajoutez ceci pour utiliser Font Awesome -->
<!-- Afficher la liste de tout les consultants du site -->
<ul id="consultant" style="list-style: none; display: none;"></ul>

<script src="https://kit.fontawesome.com/a076d05399.js"></script> <!-- Ajoutez ceci pour utiliser Font Awesome -->
<!-- Afficher la liste de tout les partenaires du site -->
<ul id="partner" style="list-style: none; display: none;"></ul>

<script src="https://kit.fontawesome.com/a076d05399.js"></script> <!-- Ajoutez ceci pour utiliser Font Awesome -->
<!-- Afficher la liste de tout les bailleurs sociaux du site -->
<ul id="funder" style="list-style: none; display: none;"></ul>



<ul id="my-project-profile" style="list-style: none; display: none;"></ul>
<ul id="add-member" style="list-style: none; display: none;"></ul>
<ul id="tous-" style="list-style: none; display: none;"></ul>
<ul id="with-project" style="list-style: none; display: none;"></ul>
<ul id="with-role-without-project" style="list-style: none; display: none;"></ul>
<ul id="without-role-without-project" style="list-style: none; display: none;"></ul>

<!-- #endregion -->


<!--#region Liste des boutons -->
<button type="button" class="box-clicable" id="my_project_profile"
    style="width: fit-content; color: gray; background-color: white; align-self: center; border-radius: 15px;border: none; margin: 5px; padding: 5px;font-size: 13px;">
    Mon profile projet </button>
<button type="button" class="box-clicable" id="add_member"
    style="width: fit-content; color: gray; background-color: white; align-self: center; border-radius: 15px;border: none; margin: 5px; padding: 5px;font-size: 13px;">
    <img src="https://lab.padem.org/wp-content/uploads/plus.png" width="30px" height="30px"
        alt="Ajouter un membre projet">
</button>
<button type="button" class="box-clicable" id="tous"
    style="width: fit-content; color: gray; background-color: white; align-self: center; border-radius: 15px; border: none; margin: 5px; padding: 5px;font-size: 13px;">
    Tous les memebres</button>
<button type="button" class="box-clicable" id="with_project"
    style="width: fit-content; color: gray; background-color: white; align-self: center; border-radius: 15px;border: none; margin: 5px; padding: 5px;font-size: 13px;">
    Avec projet </button>
<button type="button" class="box-clicable" id="with_role_without_project"
    style="width: fit-content; color: gray; background-color: white; align-self: center; border-radius: 15px;border: none; margin: 5px; padding: 5px;font-size: 13px;">
    Avec rôle et sans projet </button>
<button type="button" class="box-clicable" id="without_role_without_project"
    style="width: fit-content; color: gray; background-color: white; align-self: center; border-radius: 15px;border: none; margin: 5px; padding: 5px;font-size: 13px;">
    Sans rôle et sans projet </button>
<!--#endregion-->


<!--#region Script des boutons -->
<script>
    var menuActiveButtons = {
        'selected_background': '#29A6A7',
        'selected_color': 'white',
        'unselected_background': 'white',
        'unselected_color': 'gray',
    };
    var userEmail = user_data.email;
    var userRole = localStorage.getItem('userRole');
    var users_list = {
        'bacground_colors': {
            'Administrateur': '#FF0000',
            'Coordinateur': '#FFA500',
            'chef_de_projet': '#FFA500',
            'partenaire': '#008000',
            'comptable': '#0000FF',
            'consultant': '#800080',
            'bailleur': '#FF00FF',
            'Utilisateur': '#808080'
        },
        'emails_names': {
            'Coordinateur': 'coordinator_email',
            'chef_de_projet': 'chief_email',
            'partenaire': 'partner_email',
            'comptable': 'accountant_email',
            'consultant': 'consultant_email',
            'bailleur': 'funder_email'
        },
        'users': {
            'Coordinateur': [],
            'chef_de_projet': [],
            'partenaire': [],
            'comptable': [],
            'consultant': [],
            'bailleur': []
        },
        'urls': {
            'Administrateur': 'https://lab.padem.org/wp-json/mo/v1/getProjectChief',
            'Coordinateur': 'https://lab.padem.org/wp-json/mo/v1/getCoordinator',
            'chef_de_projet': 'https://lab.padem.org/wp-json/mo/v1/getProjectChief',
            'partenaire': 'https://lab.padem.org/wp-json/mo/v1/getPartner',
            'comptable': 'https://lab.padem.org/wp-json/mo/v1/getAccountant',
            'consultant': 'https://lab.padem.org/wp-json/mo/v1/getConsultant',
            'bailleur': 'https://lab.padem.org/wp-json/mo/v1/getFunder'
        }
    };
    document.addEventListener('DOMContentLoaded', function () {
        //#region Couleurs initiales des boutons
        document.getElementById('my_project_profile').style.backgroundColor = menuActiveButtons.unselected_background;
        document.getElementById('my_project_profile').style.color = menuActiveButtons.unselected_color;
        document.getElementById('add_member').style.backgroundColor = menuActiveButtons.unselected_background;
        document.getElementById('add_member').style.color = menuActiveButtons.unselected_color;
        document.getElementById('tous').style.backgroundColor = menuActiveButtons.selected_background;
        document.getElementById('tous').style.color = menuActiveButtons.selected_color;
        document.getElementById('with_project').style.backgroundColor = menuActiveButtons.unselected_background;
        document.getElementById('with_project').style.color = menuActiveButtons.unselected_color;
        document.getElementById('with_role_without_project').style.backgroundColor = menuActiveButtons.unselected_background;
        document.getElementById('with_role_without_project').style.color = menuActiveButtons.unselected_color;
        document.getElementById('without_role_without_project').style.backgroundColor = menuActiveButtons.unselected_background;
        document.getElementById('without_role_without_project').style.color = menuActiveButtons.unselected_color;
        //#endregion

        //#region État initial des listes
        document.getElementById('all_members').style.display = 'block';
        document.getElementById('coordinateur').style.display = 'block';
        document.getElementById('chef_de_projet').style.display = 'block';
        document.getElementById('accountant').style.display = 'block';
        document.getElementById('consultant').style.display = 'block';
        document.getElementById('partner').style.display = 'block';
        document.getElementById('funder').style.display = 'block';
        //#endregion

        //#region des zones d'affichages
        document.getElementById('my-project-profile').style.display = 'none';
        document.getElementById('add-member').style.display = 'none';
        document.getElementById('tous-').style.display = 'block';
        document.getElementById('with-project').style.display = 'none';
        document.getElementById('with-role-without-project').style.display = 'none';
        document.getElementById('without-role-without-project').style.display = 'none';
        //#endregion


        // Ajouter un événement pour afficher la liste de tout les membres
        document.getElementById('tous').addEventListener('click', function () {
            document.getElementById('my-project-profile').style.display = 'none';
            document.getElementById('add-member').style.display = 'none';
            document.getElementById('tous-').style.display = 'block';
            document.getElementById('with-project').style.display = 'none';
            document.getElementById('with-role-without-project').style.display = 'none';
            document.getElementById('without-role-without-project').style.display = 'none';
            document.getElementById('my_project_profile').style.backgroundColor = menuActiveButtons.unselected_background;
            document.getElementById('my_project_profile').style.color = menuActiveButtons.unselected_color;
            document.getElementById('add_member').style.backgroundColor = menuActiveButtons.unselected_background;
            document.getElementById('add_member').style.color = menuActiveButtons.unselected_color;
            document.getElementById('tous').style.backgroundColor = menuActiveButtons.selected_background;
            document.getElementById('tous').style.color = menuActiveButtons.selected_color;
            document.getElementById('with_project').style.backgroundColor = menuActiveButtons.unselected_background;
        });

        // Ajouter un événement pour afficher la liste de tout les membres avec un projet
        document.getElementById('with_project').addEventListener('click', function () {
            document.getElementById('all_members').style.display = 'none';
            document.getElementById('coordinateur').style.display = 'none';
            document.getElementById('chef_de_projet').style.display = 'none';
            document.getElementById('accountant').style.display = 'none';
            document.getElementById('consultant').style.display = 'none';
            document.getElementById('partner').style.display = 'none';
            document.getElementById('funder').style.display = 'none';
            document.getElementById('my_project_profile').style.backgroundColor = menuActiveButtons.unselected_background;
            document.getElementById('my_project_profile').style.color = menuActiveButtons.unselected_color;
            document.getElementById('add_member').style.backgroundColor = menuActiveButtons.unselected_background;
            document.getElementById('add_member').style.color = menuActiveButtons.unselected_color;
            document.getElementById('tous').style.backgroundColor = menuActiveButtons.unselected_background;
            document.getElementById('tous').style.color = menuActiveButtons.unselected_color;
            document.getElementById('with_project').style.backgroundColor = menuActiveButtons.selected_background;
            document.getElementById('with_project').style.color = menuActiveButtons.selected_color;
            document.getElementById('with_role_without_project').style.backgroundColor = menuActiveButtons.unselected_background;
            document.getElementById('with_role_without_project').style.color = menuActiveButtons.unselected_color;
            document.getElementById('without_role_without_project').style.backgroundColor = menuActiveButtons.unselected_background;
            document.getElementById('without_role_without_project').style.color = menuActiveButtons.unselected_color;
        });

        // Ajouter un événement pour afficher la liste de tout les membres avec un rôle et sans projet
        document.getElementById('with_role_without_project').addEventListener('click', function () {
            document.getElementById('all_members').style.display = 'none';
            document.getElementById('coordinateur').style.display = 'none';
            document.getElementById('chef_de_projet').style.display = 'none';
            document.getElementById('accountant').style.display = 'none';
            document.getElementById('consultant').style.display = 'none';
            document.getElementById('partner').style.display = 'none';
            document.getElementById('funder').style.display = 'none';
            document.getElementById('my_project_profile').style.backgroundColor = menuActiveButtons.unselected_background;
            document.getElementById('my_project_profile').style.color = menuActiveButtons.unselected_color;
            document.getElementById('add_member').style.backgroundColor = menuActiveButtons.unselected_background;
            document.getElementById('add_member').style.color = menuActiveButtons.unselected_color;
            document.getElementById('tous').style.backgroundColor = menuActiveButtons.unselected_background;
            document.getElementById('tous').style.color = menuActiveButtons.unselected_color;
            document.getElementById('with_project').style.backgroundColor = menuActiveButtons.unselected_background;
            document.getElementById('with_project').style.color = menuActiveButtons.unselected_color;
            document.getElementById('with_role_without_project').style.backgroundColor = menuActiveButtons.selected_background;
            document.getElementById('with_role_without_project').style.color = menuActiveButtons.selected_color;
            document.getElementById('without_role_without_project').style.backgroundColor = menuActiveButtons.unselected_background;
            document.getElementById('without_role_without_project').style.color = menuActiveButtons.unselected_color;
        });


    });
</script>
<!--#endregion-->


<script>
    // Récupérer la liste de tout les membres de la plate-forme
    document.addEventListener('DOMContentLoaded', function () {
        // Récupérer les informations du projet
        var users_list = {
            'emails_names': {
                'coordinateur': 'coordinator_email',
                'chef_de_projet': 'chief_email',
                'partner': 'partner_email',
                'accountant': 'accountant_email',
                'consultant': 'consultant_email',
                'funder': 'funder_email'
            },
            'users_first_names': {
                'coordinateur': 'coordinator_first_name',
                'chef_de_projet': 'chief_first_name',
                'partner': 'partner_first_name',
                'accountant': 'accountant_first_name',
                'consultant': 'consultant_first_name',
                'funder': 'funder_first_name'
            },
            'users_last_names': {
                'coordinateur': 'coordinator_last_name',
                'chef_de_projet': 'chief_last_name',
                'partner': 'partner_last_name',
                'accountant': 'accountant_last_name',
                'consultant': 'consultant_last_name',
                'funder': 'funder_last_name'
            },
            'users': {
                'coordinateur': [],
                'chef_de_projet': [],
                'partner': [],
                'comptable': [],
                'consultant': [],
                'funder': []
            },
            'urls': {
                'coordinateur': 'https://lab.padem.org/wp-json/mo/v1/getCoordinator',
                'chef_de_projet': 'https://lab.padem.org/wp-json/mo/v1/getProjectChief',
                'partner': 'https://lab.padem.org/wp-json/mo/v1/getPartner',
                'accountant': 'https://lab.padem.org/wp-json/mo/v1/getAccountant',
                'consultant': 'https://lab.padem.org/wp-json/mo/v1/getConsultant',
                'funder': 'https://lab.padem.org/wp-json/mo/v1/getFunder'
            }
        }

        // Récupérer les informations du projet
        var urls_and_data = {
            'coordinateur': {
                'url': 'https://lab.padem.org/wp-json/mo/v1/createCoordinator',
                'data': {
                    'project_id': project_id,
                    'coordinator_email': existingMemberEmail,
                    'coordinator_first_name': existingMember_first_name,
                    'coordinator_last_name': existingMember_last_name,
                    'coordinator_countryAndCity': existingMember_countryAndCity,
                    'coordinator_activity_history': JSON.stringify([
                        {
                            'Date': {
                                'hour': new Date().getHours(),
                                'minute': new Date().getMinutes(),
                                'day': new Date().getDate(),
                                'month': new Date().getMonth() + 1,
                                'year': new Date().getFullYear(),
                            }
                        },
                        {
                            'Activité': `Création du projet ${project.project_title} et ajout des membres`,
                        },
                        {
                            'Commentaire': 'Le projet est en cours de création',
                        },
                        {
                            'Divers': '',
                        }
                    ]),
                }
            },
            'chef_de_projet': {
                'url': 'https://lab.padem.org/wp-json/mo/v1/createProjectChief',
                'data': {
                    'project_id': project_id,
                    'chief_email': existingMemberEmail,
                    'chief_first_name': existingMember_first_name,
                    'chief_last_name': existingMember_last_name,
                    'chief_countryAndCity': existingMember_countryAndCity,
                    'chief_activity_history': JSON.stringify([
                        {
                            'Date': {
                                'hour': new Date().getHours(),
                                'minute': new Date().getMinutes(),
                                'day': new Date().getDate(),
                                'month': new Date().getMonth() + 1,
                                'year': new Date().getFullYear(),
                            }
                        },
                        {
                            'Activité': `Création du projet ${project.project_title} et ajout des membres`,
                        },
                        {
                            'Commentaire': 'Le projet est en cours de création',
                        },
                        {
                            'Divers': '',
                        }
                    ]),
                }
            },
            'accountant': {
                'url': 'https://lab.padem.org/wp-json/mo/v1/createAccountant',
                'data': {
                    'project_id': project_id,
                    'accountant_email': existingMemberEmail,
                    'accountant_first_name': existingMember_first_name,
                    'accountant_last_name': existingMember_last_name,
                    'accountant_countryAndCity': existingMember_countryAndCity,
                    'accountant_activity_history': JSON.stringify([
                        {
                            'Date': {
                                'hour': new Date().getHours(),
                                'minute': new Date().getMinutes(),
                                'day': new Date().getDate(),
                                'month': new Date().getMonth() + 1,
                                'year': new Date().getFullYear(),
                            }
                        },
                        {
                            'Activité': `Création du projet ${project.project_title} et ajout des membres`,
                        },
                        {
                            'Commentaire': 'Le projet est en cours de création',
                        },
                        {
                            'Divers': '',
                        },
                    ]),
                },
            },
            'consultant': {
                'url': 'https://lab.padem.org/wp-json/mo/v1/createConsultant',
                'data': {
                    'project_id': project_id,
                    'consultant_email': existingMemberEmail,
                    'consultant_first_name': existingMember_first_name,
                    'consultant_last_name': existingMember_last_name,
                    'consultant_countryAndCity': existingMember_countryAndCity,
                    'consultant_activity_history': JSON.stringify([
                        {
                            'Date': {
                                'hour': new Date().getHours(),
                                'minute': new Date().getMinutes(),
                                'day': new Date().getDate(),
                                'month': new Date().getMonth() + 1,
                                'year': new Date().getFullYear(),
                            },
                        },
                        {
                            'activite': `Création du projet ${project.project_title} et ajout des membres`,
                        },
                        {
                            'commentaire': 'Le projet est en cours de création',
                        },
                        {
                            'Divers': '',
                        }
                    ]),
                },
            },
            'partner': {
                'url': 'https://lab.padem.org/wp-json/mo/v1/createPartner',
                'data': {
                    'project_id': project_id,
                    'partner_email': existingMemberEmail,
                    'partner_first_name': existingMember_first_name,
                    'partner_last_name': existingMember_last_name,
                    'partner_countryAndCity': existingMember_countryAndCity,
                    'partner_activity_history': JSON.stringify([
                        {
                            'Date': {
                                'hour': new Date().getHours(),
                                'minute': new Date().getMinutes(),
                                'day': new Date().getDate(),
                                'month': new Date().getMonth() + 1,
                                'year': new Date().getFullYear(),
                            },
                        },
                        {
                            'activite': `Création du projet ${project.project_title} et ajout des membres`,
                        },
                        {
                            'commentaire': 'Le projet est en cours de création',
                        },
                        {
                            'Divers': '',
                        }
                    ]),
                },
            },
            'funder': {
                'url': 'https://lab.padem.org/wp-json/mo/v1/createFunder',
                'data': {
                    'project_id': project_id,
                    'funder_email': existingMemberEmail,
                    'funder_first_name': existingMember_first_name,
                    'funder_last_name': existingMember_last_name,
                    'funder_countryAndCity': existingMember_countryAndCity,
                    'funder_activity_history': JSON.stringify([
                        {
                            'Date': {
                                'hour': new Date().getHours(),
                                'minute': new Date().getMinutes(),
                                'day': new Date().getDate(),
                                'month': new Date().getMonth() + 1,
                                'year': new Date().getFullYear(),
                            },
                        },
                        {
                            'activite': `Création du projet ${project.project_title} et ajout des membres`,
                        },
                        {
                            'commentaire': 'Le projet est en cours de création',
                        },
                        {
                            'Divers': '',
                        }
                    ]),
                },
            },
        };
        // Vérifier si l'utilisateur existe déjà en fonction de son email (méthode GET)
        for (var role in users_list.urls) {
            fetch(users_list.urls[role], {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                },
            })
                .then(response => response.json())
                .then(data => {
                    data.forEach(user => {
                        users_list.users[role].push(user[users_list.emails_names[role]]);
                    });
                    // Ajouter les membres à la liste des membres
                    users_list.users[role].forEach(user => {
                        var li = document.createElement('li');
                        var li2 = document.createElement('li');
                        li.innerHTML = user;
                        // Ajouter les membres à la liste des membres (Noms, Prénoms, Rôles, Pays ou Villes, date de création du compte, date de dernière connexion, date de dernière activité, date de dernière modification)
                        // Ajouter un bonton pour mettre à jour les informations du membre (Nom, Prénom, Pays ou Ville, Mot de passe, Email, Rôle)
                        li2.innerHTML = `
                            <button type="" <i class="fas fa-user"></i> ${user} <br> 
                        `;
                        document.getElementById(role).appendChild(li);
                        document.getElementById('all_members').appendChild(li2);
                    });
                })
                .catch(error => {
                    console.error('Erreur lors de la récupération des données de l\'utilisateur :', error);
                });
        }
    });
</script>